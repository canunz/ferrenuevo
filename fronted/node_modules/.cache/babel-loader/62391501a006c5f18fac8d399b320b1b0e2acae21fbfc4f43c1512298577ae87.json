{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import{motion}from'framer-motion';import{CheckCircleIcon,HomeIcon,ShoppingBagIcon,CalendarIcon,CurrencyDollarIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PagoExitoso=()=>{const location=useLocation();const navigate=useNavigate();const[detalle,setDetalle]=useState(null);useEffect(()=>{const params=new URLSearchParams(location.search);const token=params.get('token_ws');if(token){fetch('/api/v1/transbank/confirmar',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token_ws:token})}).then(res=>res.json()).then(data=>setDetalle(data.message||data)).catch(()=>setDetalle({error:'No se pudo obtener el detalle del pago'}));}},[location.search]);const formatearPrecio=precio=>{return new Intl.NumberFormat('es-CL',{style:'currency',currency:'CLP',minimumFractionDigits:0}).format(precio);};const formatearFecha=fecha=>{if(!fecha)return'N/A';return new Date(fecha).toLocaleDateString('es-CL',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});};if(!detalle)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:\"Cargando...\"});if(detalle.error)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center text-red-600\",children:detalle.error});return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center py-12\",children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6\",children:/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-8 w-8 text-green-600\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"\\xA1Pago Exitoso!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-8\",children:\"Tu pedido ha sido procesado correctamente\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ShoppingBagIcon,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"Orden de Compra:\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:detalle.orden_compra||detalle.ordenCompra||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-green-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"Monto Total:\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-green-600\",children:detalle.monto?formatearPrecio(detalle.monto):'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-5 w-5 text-purple-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"Fecha:\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:detalle.fecha?formatearFecha(detalle.fecha):'N/A'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-800 text-sm\",children:\"Hemos enviado un correo de confirmaci\\xF3n con los detalles de tu pedido. Te contactaremos pronto para coordinar la entrega.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/'),className:\"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(HomeIcon,{className:\"h-5 w-5 mr-2\"}),\"Volver al Inicio\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/productos'),className:\"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(ShoppingBagIcon,{className:\"h-5 w-5 mr-2\"}),\"Seguir Comprando\"]})]})]})})});};export default PagoExitoso;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","motion","CheckCircleIcon","HomeIcon","ShoppingBagIcon","CalendarIcon","CurrencyDollarIcon","jsx","_jsx","jsxs","_jsxs","PagoExitoso","location","navigate","detalle","setDetalle","params","URLSearchParams","search","token","get","fetch","method","headers","body","JSON","stringify","token_ws","then","res","json","data","message","catch","error","formatearPrecio","precio","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatearFecha","fecha","Date","toLocaleDateString","year","month","day","hour","minute","className","children","div","initial","opacity","scale","animate","orden_compra","ordenCompra","monto","onClick"],"sources":["C:/ferrenuevo/fronted/src/paginas/PagoExitoso.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  CheckCircleIcon,\r\n  HomeIcon,\r\n  ShoppingBagIcon,\r\n  CalendarIcon,\r\n  CurrencyDollarIcon\r\n} from '@heroicons/react/24/outline';\r\n\r\nconst PagoExitoso = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [detalle, setDetalle] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    const token = params.get('token_ws');\r\n    if (token) {\r\n      fetch('/api/v1/transbank/confirmar', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ token_ws: token })\r\n      })\r\n        .then(res => res.json())\r\n        .then(data => setDetalle(data.message || data))\r\n        .catch(() => setDetalle({ error: 'No se pudo obtener el detalle del pago' }));\r\n    }\r\n  }, [location.search]);\r\n\r\n  const formatearPrecio = (precio) => {\r\n    return new Intl.NumberFormat('es-CL', {\r\n      style: 'currency',\r\n      currency: 'CLP',\r\n      minimumFractionDigits: 0\r\n    }).format(precio);\r\n  };\r\n\r\n  const formatearFecha = (fecha) => {\r\n    if (!fecha) return 'N/A';\r\n    return new Date(fecha).toLocaleDateString('es-CL', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (!detalle) return <div className=\"min-h-screen flex items-center justify-center\">Cargando...</div>;\r\n  if (detalle.error) return <div className=\"min-h-screen flex items-center justify-center text-red-600\">{detalle.error}</div>;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12\">\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.9 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        className=\"max-w-md w-full mx-auto\"\r\n      >\r\n        <div className=\"bg-white rounded-lg shadow-lg p-8 text-center\">\r\n          {/* Icono de éxito */}\r\n          <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6\">\r\n            <CheckCircleIcon className=\"h-8 w-8 text-green-600\" />\r\n          </div>\r\n\r\n          {/* Título */}\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n            ¡Pago Exitoso!\r\n          </h1>\r\n          <p className=\"text-gray-600 mb-8\">\r\n            Tu pedido ha sido procesado correctamente\r\n          </p>\r\n\r\n          {/* Detalles del pago */}\r\n          <div className=\"space-y-4 mb-8\">\r\n            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <ShoppingBagIcon className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                <span className=\"text-gray-700\">Orden de Compra:</span>\r\n              </div>\r\n              <span className=\"font-medium text-gray-900\">{detalle.orden_compra || detalle.ordenCompra || 'N/A'}</span>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <CurrencyDollarIcon className=\"h-5 w-5 text-green-600 mr-2\" />\r\n                <span className=\"text-gray-700\">Monto Total:</span>\r\n              </div>\r\n              <span className=\"font-bold text-green-600\">\r\n                {detalle.monto ? formatearPrecio(detalle.monto) : 'N/A'}\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <CalendarIcon className=\"h-5 w-5 text-purple-600 mr-2\" />\r\n                <span className=\"text-gray-700\">Fecha:</span>\r\n              </div>\r\n              <span className=\"font-medium text-gray-900\">\r\n                {detalle.fecha ? formatearFecha(detalle.fecha) : 'N/A'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mensaje adicional */}\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8\">\r\n            <p className=\"text-blue-800 text-sm\">\r\n              Hemos enviado un correo de confirmación con los detalles de tu pedido. \r\n              Te contactaremos pronto para coordinar la entrega.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Botones */}\r\n          <div className=\"space-y-3\">\r\n            <button\r\n              onClick={() => navigate('/')}\r\n              className=\"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center\"\r\n            >\r\n              <HomeIcon className=\"h-5 w-5 mr-2\" />\r\n              Volver al Inicio\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => navigate('/productos')}\r\n              className=\"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center\"\r\n            >\r\n              <ShoppingBagIcon className=\"h-5 w-5 mr-2\" />\r\n              Seguir Comprando\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PagoExitoso; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}