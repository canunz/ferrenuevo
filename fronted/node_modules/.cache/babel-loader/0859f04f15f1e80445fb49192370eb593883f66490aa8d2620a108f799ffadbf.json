{"ast":null,"code":"var _jsxFileName = \"C:\\\\ferrenuevo (copia buena)\\\\fronted\\\\src\\\\componentes\\\\descuentos\\\\GestorPromociones.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { servicioProductos } from '../../servicios/servicioProductos';\nimport { servicioDescuentos } from '../../servicios/servicioDescuentos';\nimport { TagIcon, PlusCircleIcon, PencilIcon, TrashIcon } from '@heroicons/react/24/outline';\nimport api from '../../servicios/api';\nimport dayjs from 'dayjs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ModalPromocion = ({\n  open,\n  onClose,\n  onSave,\n  producto\n}) => {\n  _s();\n  const [form, setForm] = useState({\n    nombre: '',\n    descripcion: '',\n    tipo_descuento: 'porcentaje',\n    valor_descuento: '',\n    fecha_inicio: '',\n    fecha_fin: ''\n  });\n  const [cargando, setCargando] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (open && producto) {\n      // Fechas por defecto: hoy y maÃ±ana\n      const hoy = dayjs().format('YYYY-MM-DD');\n      const manana = dayjs().add(1, 'day').format('YYYY-MM-DD');\n      setForm({\n        nombre: `Promo ${producto.nombre}`,\n        descripcion: '',\n        tipo_descuento: 'porcentaje',\n        valor_descuento: '',\n        fecha_inicio: hoy,\n        fecha_fin: manana\n      });\n      setError(null);\n    }\n  }, [open, producto]);\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setCargando(true);\n    setError(null);\n    try {\n      // Actualizar el campo descuento del producto (descuento manual)\n      await servicioProductos.actualizarDescuento(producto.id, form.valor_descuento);\n      onSave();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message);\n    } finally {\n      setCargando(false);\n    }\n  };\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-lg p-6 w-full max-w-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4\",\n        children: [\"Crear Promoci\\xF3n para \", producto === null || producto === void 0 ? void 0 : producto.nombre]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"nombre\",\n          value: form.nombre,\n          onChange: handleChange,\n          placeholder: \"Nombre\",\n          className: \"w-full p-2 border rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"descripcion\",\n          value: form.descripcion,\n          onChange: handleChange,\n          placeholder: \"Descripci\\xF3n\",\n          className: \"w-full p-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"tipo_descuento\",\n            value: form.tipo_descuento,\n            onChange: handleChange,\n            className: \"p-2 border rounded\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"porcentaje\",\n              children: \"Porcentaje (%)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"monto_fijo\",\n              children: \"Monto Fijo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"valor_descuento\",\n            type: \"number\",\n            value: form.valor_descuento,\n            onChange: handleChange,\n            placeholder: \"Valor\",\n            className: \"p-2 border rounded w-32\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"fecha_inicio\",\n            type: \"date\",\n            value: form.fecha_inicio,\n            onChange: handleChange,\n            className: \"p-2 border rounded w-1/2\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"fecha_fin\",\n            type: \"date\",\n            value: form.fecha_fin,\n            onChange: handleChange,\n            className: \"p-2 border rounded w-1/2\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500 text-sm\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end gap-2 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 bg-gray-200 rounded\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: cargando,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded\",\n            children: cargando ? 'Guardando...' : 'Guardar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(ModalPromocion, \"WDVIZYccwrY7/5pUXmxaGY738oQ=\");\n_c = ModalPromocion;\nconst GestorPromociones = () => {\n  _s2();\n  const [productos, setProductos] = useState([]);\n  const [cargando, setCargando] = useState(true);\n  const [error, setError] = useState(null);\n  const [modal, setModal] = useState({\n    open: false,\n    producto: null\n  });\n  const [exito, setExito] = useState('');\n  const cargarDatos = async () => {\n    setCargando(true);\n    setError(null);\n    setExito('');\n    try {\n      const resProductos = await servicioProductos.obtenerTodos({\n        limit: 1000\n      });\n      const resDescuentos = await servicioDescuentos.obtenerTodos();\n      const descuentos = resDescuentos.data || [];\n      const productosConDescuento = (resProductos.data || []).map(prod => {\n        const descuento = descuentos.find(d => d.producto_id === prod.id && d.estado === 'activa');\n        return {\n          ...prod,\n          descuento\n        };\n      });\n      setProductos(productosConDescuento);\n    } catch (err) {\n      setError(err.message || 'Error al cargar los datos');\n      console.error(err);\n    } finally {\n      setCargando(false);\n    }\n  };\n  useEffect(() => {\n    cargarDatos();\n  }, []);\n  const formatearPrecio = precio => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP'\n    }).format(precio);\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0,\n      y: 20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    transition: {\n      duration: 0.5\n    },\n    className: \"space-y-6\",\n    children: [exito && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-green-100 text-green-800 p-2 rounded text-center\",\n      children: exito\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white dark:bg-gray-800 rounded-xl shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 border-b border-gray-200 dark:border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold text-gray-900 dark:text-white\",\n          children: \"Productos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 dark:text-gray-400 mt-1\",\n          children: \"Aplica descuentos a productos espec\\xEDficos.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200 dark:divide-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50 dark:bg-gray-700\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Producto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Precio Original\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Descuento Aplicado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                className: \"relative px-6 py-3\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Acciones\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200 dark:bg-gray-800\",\n            children: productos.map(producto => {\n              var _ref, _producto$promocion_a;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex-shrink-0 h-10 w-10\",\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        className: \"h-10 w-10 rounded-full object-cover\",\n                        src: producto.imagen || '/assets/imagenes/productos/placeholder.jpg',\n                        alt: producto.nombre\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"ml-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm font-medium text-gray-900 dark:text-white\",\n                        children: producto.nombre\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500 dark:text-gray-400\",\n                        children: [\"SKU: \", producto.codigo_sku]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-gray-900 dark:text-white\",\n                    children: formatearPrecio(producto.precio)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: producto.tiene_promocion && producto.promocion_activa ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\",\n                    children: producto.promocion_activa.tipo === 'porcentaje' ? `-${producto.promocion_activa.porcentaje}%` : `-$${Number((_ref = (_producto$promocion_a = producto.promocion_activa.ahorro) !== null && _producto$promocion_a !== void 0 ? _producto$promocion_a : producto.promocion_activa.descuento_monto) !== null && _ref !== void 0 ? _ref : 0).toLocaleString('es-CL')}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 23\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-500 italic\",\n                    children: \"Sin descuento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 flex items-center\",\n                    onClick: () => setModal({\n                      open: true,\n                      producto\n                    }),\n                    children: [/*#__PURE__*/_jsxDEV(PlusCircleIcon, {\n                      className: \"w-5 h-5 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 23\n                    }, this), \"Crear Descuento\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this)]\n              }, producto.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), productos.length === 0 && !cargando && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No se encontraron productos.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalPromocion, {\n      open: modal.open,\n      producto: modal.producto,\n      onClose: () => setModal({\n        open: false,\n        producto: null\n      }),\n      onSave: () => {\n        setModal({\n          open: false,\n          producto: null\n        });\n        setExito('Â¡Descuento creado y asociado correctamente!');\n        cargarDatos();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n};\n_s2(GestorPromociones, \"c3d1sW0cUnJdTUzmpr/BSGROp1M=\");\n_c2 = GestorPromociones;\nexport default GestorPromociones;\nvar _c, _c2;\n$RefreshReg$(_c, \"ModalPromocion\");\n$RefreshReg$(_c2, \"GestorPromociones\");","map":{"version":3,"names":["React","useState","useEffect","motion","servicioProductos","servicioDescuentos","TagIcon","PlusCircleIcon","PencilIcon","TrashIcon","api","dayjs","jsxDEV","_jsxDEV","ModalPromocion","open","onClose","onSave","producto","_s","form","setForm","nombre","descripcion","tipo_descuento","valor_descuento","fecha_inicio","fecha_fin","cargando","setCargando","error","setError","hoy","format","manana","add","handleChange","e","target","name","value","handleSubmit","preventDefault","actualizarDescuento","id","err","_err$response","_err$response$data","response","data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","placeholder","required","type","onClick","disabled","_c","GestorPromociones","_s2","productos","setProductos","modal","setModal","exito","setExito","cargarDatos","resProductos","obtenerTodos","limit","resDescuentos","descuentos","productosConDescuento","map","prod","descuento","find","d","producto_id","estado","console","formatearPrecio","precio","Intl","NumberFormat","style","currency","div","initial","opacity","y","animate","transition","duration","scope","_ref","_producto$promocion_a","src","imagen","alt","codigo_sku","tiene_promocion","promocion_activa","tipo","porcentaje","Number","ahorro","descuento_monto","toLocaleString","length","_c2","$RefreshReg$"],"sources":["C:/ferrenuevo (copia buena)/fronted/src/componentes/descuentos/GestorPromociones.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { servicioProductos } from '../../servicios/servicioProductos';\r\nimport { servicioDescuentos } from '../../servicios/servicioDescuentos';\r\nimport { TagIcon, PlusCircleIcon, PencilIcon, TrashIcon } from '@heroicons/react/24/outline';\r\nimport api from '../../servicios/api';\r\nimport dayjs from 'dayjs';\r\n\r\nconst ModalPromocion = ({ open, onClose, onSave, producto }) => {\r\n  const [form, setForm] = useState({\r\n    nombre: '',\r\n    descripcion: '',\r\n    tipo_descuento: 'porcentaje',\r\n    valor_descuento: '',\r\n    fecha_inicio: '',\r\n    fecha_fin: ''\r\n  });\r\n  const [cargando, setCargando] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (open && producto) {\r\n      // Fechas por defecto: hoy y maÃ±ana\r\n      const hoy = dayjs().format('YYYY-MM-DD');\r\n      const manana = dayjs().add(1, 'day').format('YYYY-MM-DD');\r\n      setForm({\r\n        nombre: `Promo ${producto.nombre}`,\r\n        descripcion: '',\r\n        tipo_descuento: 'porcentaje',\r\n        valor_descuento: '',\r\n        fecha_inicio: hoy,\r\n        fecha_fin: manana\r\n      });\r\n      setError(null);\r\n    }\r\n  }, [open, producto]);\r\n\r\n  const handleChange = e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setCargando(true);\r\n    setError(null);\r\n    try {\r\n      // Actualizar el campo descuento del producto (descuento manual)\r\n      await servicioProductos.actualizarDescuento(producto.id, form.valor_descuento);\r\n      onSave();\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || err.message);\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-lg p-6 w-full max-w-md\">\r\n        <h2 className=\"text-xl font-bold mb-4\">Crear PromociÃ³n para {producto?.nombre}</h2>\r\n        <form onSubmit={handleSubmit} className=\"space-y-3\">\r\n          <input name=\"nombre\" value={form.nombre} onChange={handleChange} placeholder=\"Nombre\" className=\"w-full p-2 border rounded\" required />\r\n          <textarea name=\"descripcion\" value={form.descripcion} onChange={handleChange} placeholder=\"DescripciÃ³n\" className=\"w-full p-2 border rounded\" />\r\n          <div className=\"flex gap-2\">\r\n            <select name=\"tipo_descuento\" value={form.tipo_descuento} onChange={handleChange} className=\"p-2 border rounded\">\r\n              <option value=\"porcentaje\">Porcentaje (%)</option>\r\n              <option value=\"monto_fijo\">Monto Fijo</option>\r\n            </select>\r\n            <input name=\"valor_descuento\" type=\"number\" value={form.valor_descuento} onChange={handleChange} placeholder=\"Valor\" className=\"p-2 border rounded w-32\" required />\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <input name=\"fecha_inicio\" type=\"date\" value={form.fecha_inicio} onChange={handleChange} className=\"p-2 border rounded w-1/2\" required />\r\n            <input name=\"fecha_fin\" type=\"date\" value={form.fecha_fin} onChange={handleChange} className=\"p-2 border rounded w-1/2\" required />\r\n          </div>\r\n          {error && <div className=\"text-red-500 text-sm\">{error}</div>}\r\n          <div className=\"flex justify-end gap-2 mt-2\">\r\n            <button type=\"button\" onClick={onClose} className=\"px-4 py-2 bg-gray-200 rounded\">Cancelar</button>\r\n            <button type=\"submit\" disabled={cargando} className=\"px-4 py-2 bg-blue-600 text-white rounded\">{cargando ? 'Guardando...' : 'Guardar'}</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst GestorPromociones = () => {\r\n  const [productos, setProductos] = useState([]);\r\n  const [cargando, setCargando] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [modal, setModal] = useState({ open: false, producto: null });\r\n  const [exito, setExito] = useState('');\r\n\r\n  const cargarDatos = async () => {\r\n    setCargando(true);\r\n    setError(null);\r\n    setExito('');\r\n    try {\r\n      const resProductos = await servicioProductos.obtenerTodos({ limit: 1000 });\r\n      const resDescuentos = await servicioDescuentos.obtenerTodos();\r\n      const descuentos = resDescuentos.data || [];\r\n      const productosConDescuento = (resProductos.data || []).map(prod => {\r\n        const descuento = descuentos.find(d => d.producto_id === prod.id && d.estado === 'activa');\r\n        return { ...prod, descuento };\r\n      });\r\n      setProductos(productosConDescuento);\r\n    } catch (err) {\r\n      setError(err.message || 'Error al cargar los datos');\r\n      console.error(err);\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    cargarDatos();\r\n  }, []);\r\n\r\n  const formatearPrecio = (precio) => {\r\n    return new Intl.NumberFormat('es-CL', {\r\n      style: 'currency',\r\n      currency: 'CLP',\r\n    }).format(precio);\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.5 }}\r\n      className=\"space-y-6\"\r\n    >\r\n      {exito && <div className=\"bg-green-100 text-green-800 p-2 rounded text-center\">{exito}</div>}\r\n      {/* Listado de Productos */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg\">\r\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n            Productos\r\n          </h2>\r\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\r\n            Aplica descuentos a productos especÃ­ficos.\r\n          </p>\r\n        </div>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\r\n              <tr>\r\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Producto</th>\r\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Precio Original</th>\r\n                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Descuento Aplicado</th>\r\n                <th scope=\"col\" className=\"relative px-6 py-3\">\r\n                  <span className=\"sr-only\">Acciones</span>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800\">\r\n              {productos.map((producto) => (\r\n                <tr key={producto.id}>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"flex items-center\">\r\n                      <div className=\"flex-shrink-0 h-10 w-10\">\r\n                        <img className=\"h-10 w-10 rounded-full object-cover\" src={producto.imagen || '/assets/imagenes/productos/placeholder.jpg'} alt={producto.nombre} />\r\n                      </div>\r\n                      <div className=\"ml-4\">\r\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{producto.nombre}</div>\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">SKU: {producto.codigo_sku}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"text-sm text-gray-900 dark:text-white\">{formatearPrecio(producto.precio)}</div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    {producto.tiene_promocion && producto.promocion_activa ? (\r\n                      <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\r\n                        {producto.promocion_activa.tipo === 'porcentaje'\r\n                          ? `-${producto.promocion_activa.porcentaje}%`\r\n                          : `-$${Number(producto.promocion_activa.ahorro ?? producto.promocion_activa.descuento_monto ?? 0).toLocaleString('es-CL')}`}\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-sm text-gray-500 italic\">Sin descuento</span>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                    <button\r\n                      className=\"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 flex items-center\"\r\n                      onClick={() => setModal({ open: true, producto })}\r\n                    >\r\n                      <PlusCircleIcon className=\"w-5 h-5 mr-1\" />\r\n                      Crear Descuento\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          {productos.length === 0 && !cargando && (\r\n            <div className=\"text-center py-12\">\r\n              <p className=\"text-gray-500\">No se encontraron productos.</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <ModalPromocion\r\n        open={modal.open}\r\n        producto={modal.producto}\r\n        onClose={() => setModal({ open: false, producto: null })}\r\n        onSave={() => {\r\n          setModal({ open: false, producto: null });\r\n          setExito('Â¡Descuento creado y asociado correctamente!');\r\n          cargarDatos();\r\n        }}\r\n      />\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default GestorPromociones;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}